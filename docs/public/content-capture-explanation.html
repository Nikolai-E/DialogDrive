<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DialogDrive - Content Capture Explanation</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            margin: 0;
            padding: 20px;
            background: #f3f4f6;
            line-height: 1.6;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            padding: 32px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        .header {
            text-align: center;
            margin-bottom: 40px;
        }
        .section {
            margin-bottom: 40px;
            padding: 24px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            background: #fafafa;
        }
        .section h3 {
            margin: 0 0 16px 0;
            color: #374151;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .code-block {
            background: #1f2937;
            color: #f9fafb;
            padding: 16px;
            border-radius: 6px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 14px;
            overflow-x: auto;
            margin: 12px 0;
        }
        .flow-diagram {
            display: flex;
            flex-direction: column;
            gap: 16px;
            margin: 20px 0;
        }
        .flow-step {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
        }
        .flow-arrow {
            text-align: center;
            color: #6b7280;
            font-size: 18px;
        }
        .extraction-methods {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        .method-card {
            padding: 16px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            background: white;
        }
        .method-card h4 {
            margin: 0 0 8px 0;
            color: #111827;
            font-size: 16px;
        }
        .example-data {
            background: #f0f9ff;
            border: 1px solid #0ea5e9;
            border-radius: 6px;
            padding: 16px;
            margin: 16px 0;
        }
        .warning {
            background: #fef3c7;
            border: 1px solid #f59e0b;
            border-radius: 6px;
            padding: 16px;
            margin: 16px 0;
        }
        .success {
            background: #dcfce7;
            border: 1px solid #16a34a;
            border-radius: 6px;
            padding: 16px;
            margin: 16px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ü§ñ DialogDrive Auto-Capture Technology</h1>
            <p>How the extension intelligently extracts conversation data from AI chat platforms</p>
        </div>

        <div class="section">
            <h3>üîç How Content Capture Works</h3>
            <p>When you click "Capture" in the DialogDrive form, here's what happens behind the scenes:</p>
            
            <div class="flow-diagram">
                <div class="flow-step">
                    <span style="background: #3b82f6; color: white; border-radius: 50%; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; font-weight: bold;">1</span>
                    <div>
                        <strong>Extension detects active tab:</strong> Checks if you're on ChatGPT today (Gemini/Claude support planned)
                    </div>
                </div>
                <div class="flow-arrow">‚Üì</div>
                <div class="flow-step">
                    <span style="background: #10b981; color: white; border-radius: 50%; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; font-weight: bold;">2</span>
                    <div>
                        <strong>Content script activates:</strong> Injects smart extraction code into the chat page
                    </div>
                </div>
                <div class="flow-arrow">‚Üì</div>
                <div class="flow-step">
                    <span style="background: #f59e0b; color: white; border-radius: 50%; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; font-weight: bold;">3</span>
                    <div>
                        <strong>Multi-strategy extraction:</strong> Uses multiple methods to find conversation title and content
                    </div>
                </div>
                <div class="flow-arrow">‚Üì</div>
                <div class="flow-step">
                    <span style="background: #8b5cf6; color: white; border-radius: 50%; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; font-weight: bold;">4</span>
                    <div>
                        <strong>Data packaging:</strong> Combines URL, title, message count, and summary into bookmark
                    </div>
                </div>
            </div>
        </div>

        <div class="section">
            <h3>üéØ Extraction Strategies (Pure JavaScript DOM Analysis)</h3>
            
            <div class="extraction-methods">
                <div class="method-card">
                    <h4>üè∑Ô∏è Title Extraction</h4>
                    <p><strong>Strategy 1:</strong> Sidebar conversation titles</p>
                    <p><strong>Strategy 2:</strong> Page title cleanup</p>
                    <p><strong>Strategy 3:</strong> First user message excerpt</p>
                    <p><strong>Strategy 4:</strong> Heading and prominent text</p>
                </div>
                
                <div class="method-card">
                    <h4>üí¨ Content Analysis</h4>
                    <p><strong>Message Counting:</strong> Scans for chat message elements</p>
                    <p><strong>Role Detection:</strong> Separates user vs AI messages</p>
                    <p><strong>Last Message:</strong> Captures most recent exchange</p>
                    <p><strong>Summary Generation:</strong> Creates helpful descriptions</p>
                </div>
            </div>

            <div class="warning">
                <strong>‚ö†Ô∏è Browser Limitations:</strong> Content extraction works by analyzing the HTML DOM structure. Different AI platforms use different markup, so extraction quality varies. The system includes multiple fallback strategies to ensure it always captures something useful.
            </div>
        </div>

        <div class="section">
            <h3>üìä What Gets Captured - Example Data</h3>
            
            <h4>For ChatGPT conversations:</h4>
            <div class="example-data">
                <strong>Captured Data Example:</strong>
                <div class="code-block">{
  "title": "How to build a React component for...",
  "url": "https://chatgpt.com/c/abc123-def456",
  "platform": "chatgpt",
  "scrapedContent": {
    "messageCount": 12,
    "userMessageCount": 6, 
    "assistantMessageCount": 6,
    "lastMessage": "Thank you! That implementation works perfectly...",
    "summary": "ChatGPT conversation with 12 messages",
    "scrapedAt": "2025-07-31T10:30:00.000Z"
  }
}</div>
            </div>

            <h4>For Gemini conversations (future support):</h4>
            <div class="example-data">
                <strong>Captured Data Example:</strong>
                <div class="code-block">{
  "title": "Explain quantum computing basics",
  "url": "https://gemini.google.com/app/xyz789",
  "platform": "gemini",
  "scrapedContent": {
    "messageCount": 8,
    "lastMessage": "Quantum entanglement is a phenomenon where...",
    "summary": "Gemini conversation with 8 messages",
    "scrapedAt": "2025-07-31T10:30:00.000Z"
  }
}</div>
            </div>
        </div>

        <div class="section">
            <h3>üîß Technical Implementation Details</h3>
            
            <p><strong>Pure JavaScript DOM Manipulation:</strong></p>
            <div class="code-block">// Example: ChatGPT title extraction
const strategies = [
  () => document.querySelectorAll('[role="menuitem"] div'),
  () => document.title.replace(' | ChatGPT', ''),
  () => document.querySelector('[data-message-author-role="user"]')?.textContent
];

for (const strategy of strategies) {
  const result = strategy();
  if (result && isValidTitle(result)) {
    return result;
  }
}</div>

            <p><strong>Platform-Specific Selectors:</strong></p>
            <div class="code-block">// ChatGPT message detection
const messages = document.querySelectorAll('[data-message-author-role]');

// Gemini message detection  
const messages = document.querySelectorAll('[data-message-id], .message');

// Claude message detection
const messages = document.querySelectorAll('.message, [data-testid="message"]');</div>
        </div>

        <div class="section">
            <h3>‚úÖ What You'll See After Capture</h3>
            
            <div class="success">
                <strong>‚ú® Successful Capture Result:</strong>
                <ul>
                    <li><strong>Auto-filled URL:</strong> Current conversation link automatically added</li>
                    <li><strong>Smart Title:</strong> Conversation title extracted from page or first message</li>
                    <li><strong>Rich Description:</strong> Auto-generated summary with message count and preview</li>
                    <li><strong>Platform Detection:</strong> Correct AI service (ChatGPT today; Gemini/Claude once released) automatically selected</li>
                    <li><strong>Success Toast:</strong> "Chat captured successfully! (12 messages)" confirmation</li>
                </ul>
            </div>

            <h4>Example auto-filled form after capture:</h4>
            <div class="example-data">
                <strong>üìù Title:</strong> "How to build a React component for..."<br>
                <strong>üîó URL:</strong> https://chatgpt.com/c/abc123-def456<br>
                <strong>ü§ñ Platform:</strong> ChatGPT<br>
                <strong>üìÑ Description:</strong> "Captured: ChatGPT conversation with 12 messages. Last message: Thank you! That implementation works perfectly..."<br>
                <strong>üìÅ Workspace:</strong> Development (or your chosen workspace)
            </div>
        </div>

        <div class="section">
            <h3>üîÑ Fallback Mechanisms</h3>
            
            <p>If advanced content extraction fails, the system gracefully falls back to:</p>
            <ul>
                <li><strong>URL-only capture:</strong> Gets current page URL and detects platform</li>
                <li><strong>Date-based titles:</strong> "ChatGPT Chat - 7/31/2025" format</li>
                <li><strong>Manual entry prompt:</strong> Suggests user add custom title</li>
                <li><strong>Basic validation:</strong> Ensures URL is from supported platform</li>
            </ul>

            <div class="warning">
                <strong>üõ†Ô∏è Development Note:</strong> Content extraction works best on standard chat interfaces. Some advanced features or custom themes might affect extraction quality, but the system will always capture the URL and basic information.
            </div>
        </div>

        <div class="section">
            <h3>üöÄ Try It Out!</h3>
            
            <ol>
                <li>Open a ChatGPT conversation (Gemini support planned)</li>
                <li>Click the DialogDrive extension icon</li>
                <li>Click "Add" ‚Üí "Bookmark Chat"</li>
                <li>Click the blue "Capture" button</li>
                <li>Watch as the form magically fills with conversation data!</li>
            </ol>

            <div class="success">
                <strong>üéâ Result:</strong> You'll have a perfectly organized bookmark with title, URL, message count, and description - all captured automatically with zero manual typing!
            </div>
        </div>
    </div>
</body>
</html>
